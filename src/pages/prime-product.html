<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Open+Sans:wght@400;500;600;700;800&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Open+Sans:wght@400;500;600;700;800&family=Roboto+Condensed:wght@400;500;600;700&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="../dist/css/styles.css" />
    <!-- Tailwind -->
    <link rel="stylesheet" href="../dist/css/app.css" />
    <!-- Datatables -->
    <link rel="stylesheet" href="../plugins/datatable/css/dataTables.min.css" />

    <style>
      .highcharts-figure,
      .highcharts-data-table table {
        min-width: 310px;
        max-width: 800px;
        margin: 1em auto;
      }

      #container {
        height: 400px;
      }

      .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #ebebeb;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
      }

      .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
      }

      .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
      }

      .highcharts-data-table td,
      .highcharts-data-table th,
      .highcharts-data-table caption {
        padding: 0.5em;
      }

      .highcharts-data-table thead tr,
      .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
      }

      .highcharts-data-table tr:hover {
        background: #f1f7ff;
      }
      .popover {
        display: none;
      }
    </style>
  </head>
  <body class="font-roboto">
    <div class="h-full">
      <!-- Nav menu  -->
      <nav
        class="fixed top-0 z-50 flex items-center w-full px-4 py-3 bg-white border border-b-[#DEDEDE] gap-x-2 md:px-8 md:py-6"
      >
        <img
          src="../dist/img/trakindo-logo-2.png"
          class="w-[165px] h-[42px]"
          alt="trakindo-logo"
        />
        <div class="flex-1 ml-8">
          <ul class="flex gap-x-2">
            <li>
              <a href="#" class="nav-item active"> GP Report </a>
            </li>
            <li>
              <a href="#" class="nav-item">DFRS Report</a>
            </li>
          </ul>
        </div>
      </nav>
      <!-- Menu Category  -->
      <nav
        class="flex items-center w-full border overflow-x-auto overflow-y-hidden bg-cloudy-20 mt-[67px] md:mt-[91px] border-b-cloudy-50 px-4 md:px-8"
      >
        <ul class="flex flex-shrink-0 gap-x-4 md:gap-x-8 item-center">
          <li>
            <a href="#" class="nav-cat active">Prime Porduct (PP)</a>
          </li>
          <li>
            <a href="#" class="nav-cat">Product Support (PS)</a>
          </li>
          <li>
            <a href="#" class="nav-cat">Rental & Used Equipment (RUE)</a>
          </li>
        </ul>
        <div class="flex-shrink-0 ml-auto">Jan 2024</div>
      </nav>
      <main class="p-4 md:p-8">
        <!-- GP Percentage  -->
        <div class="flex flex-col w-full">
          <h1 class="text-cloudy-110 text-[32px] leading-10 font-semibold mb-6">
            GP Percentage
          </h1>
          <div>
            <div class="flex items-center w-full mb-6">
              <div class="flex flex-1 gap-x-3">
                <button class="px-6 py-2 rounded-[32px] btn btn-secondary">
                  By Model
                </button>
                <button class="px-6 py-2 rounded-[32px] btn btn-white">
                  By Profit Center
                </button>
              </div>
              <div class="ml-auto">
                <p class="text-sm font-normal text-secondary-90/60">
                  Last Update: 24 September 2023 | 13:00 WIB
                </p>
              </div>
            </div>
            <!-- Card  -->
            <div class="w-full border rounded-lg border-[#E4E7EC] shadow-sm">
              <div
                class="flex w-full px-4 border bg-cloudy-20 border-b-cloudy-50 md:px-6"
              >
                <ul class="flex flex-shrink-0 gap-x-4 md:gap-x-8 item-center">
                  <li>
                    <a href="#" class="nav-cat active">
                      <img
                        src="../dist/icons/engine.svg"
                        class="w-5 h-5 mr-2"
                        alt="engine"
                      />
                      <span>Machine</span>
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-cat">
                      <img
                        src="../dist/icons/gears.svg"
                        class="w-5 h-5 mr-2"
                        alt="gears"
                      />
                      <span>Engine</span>
                    </a>
                  </li>
                </ul>
              </div>
              <!-- Machine Content  -->
              <div
                class="relative z-20 flex flex-col w-full h-full overflow-y-auto md:flex-row"
              >
                <!-- Chart  -->
                <div class="w-full md:w-1/2">
                  <div
                    class="relative z-20 flex flex-col overflow-x-auto md:max-h-[620px] h-full"
                  >
                    <div class="p-6 pb-0">
                      <!-- Breadcrumbs  -->
                      <div class="flex items-center mb-4">
                        <ol
                          class="inline-flex items-center space-x-1 md:space-x-2"
                          id="machine-bread"
                        >
                          <li class="inline-flex items-center">
                            <a
                              href="#"
                              class="inline-flex items-center text-[22px] font-semibold text-cloudy-110"
                              >Machine GP %</a
                            >
                          </li>
                          <!-- <li>
                        <div class="flex items-center">
                          <img src="../dist/icons/arrowBackneclosCloud.svg" class="w-4 h-4" alt="arrowBackneclos">
                          <a
                            href="#"
                            class="ms-1 text-[22px] font-semibold text-cloudy-110"
                            >All 320 + 323</a
                          >
                        </div>
                      </li> -->
                        </ol>
                        <div class="ml-auto">
                          <button
                            class="btn btn-ghost trigger"
                            data-popover="#popover1"
                          >
                            <img
                              src="../dist/icons/download.svg"
                              alt="download-icon"
                            />
                          </button>
                          <div
                            class="z-50 hidden w-[288px] mb-3 text-sm font-normal -pt-10 leading-normal text-left no-underline break-words bg-white border rounded-lg shadow-xl border-cloudy-30 popover"
                            id="popover1"
                          >
                            <div class="p-6 space-y-4">
                              <div class="pb-4 border-b border-b-cloudy-40">
                                <h4 class="text-lg font-semibold text-gray-900">
                                  Download Charts
                                </h4>
                              </div>
                              <div class="flex flex-col space-y-2">
                                <h4 class="text-lg font-semibold text-gray-900">
                                  Data
                                </h4>
                                <div
                                  class="w-full px-3 py-3 border rounded-lg border-cloudy-40"
                                >
                                  <label
                                    class="flex items-center gap-3 cursor-pointer"
                                  >
                                    <input
                                      type="checkbox"
                                      name="data"
                                      value="ci"
                                      class="custom-checkbox"
                                    />
                                    <span
                                      class="font-normal select-none whitespace-nowrap text-neutral-100 font-base"
                                      >Constructions Industry (CI)</span
                                    >
                                  </label>
                                </div>
                                <div
                                  class="w-full px-3 py-3 border rounded-lg border-cloudy-40"
                                >
                                  <label
                                    class="flex items-center gap-3 cursor-pointer"
                                  >
                                    <input
                                      type="checkbox"
                                      name="data"
                                      class="custom-checkbox"
                                      value="et"
                                    />
                                    <span
                                      class="font-normal select-none whitespace-nowrap text-neutral-100 font-base"
                                      >Powers System (E&T)</span
                                    >
                                  </label>
                                </div>
                                <div
                                  class="w-full px-3 py-3 border rounded-lg border-cloudy-40"
                                >
                                  <label
                                    class="flex items-center gap-3 cursor-pointer"
                                  >
                                    <input
                                      type="checkbox"
                                      name="data"
                                      class="custom-checkbox"
                                      value="ri"
                                    />
                                    <span
                                      class="font-normal select-none whitespace-nowrap text-neutral-100 font-base"
                                      >Mining (RI)</span
                                    >
                                  </label>
                                </div>
                              </div>
                              <div class="space-y-2">
                                <h4 class="text-lg font-semibold text-gray-900">
                                  Document
                                </h4>
                                <div
                                  class="w-full px-3 py-3 border rounded-lg border-cloudy-40"
                                >
                                  <label
                                    class="flex items-center gap-3 cursor-pointer"
                                  >
                                    <input
                                      name="document"
                                      value="pptx"
                                      type="radio"
                                      class="w-5 h-5 border border-gray-300 rounded-full checked:bg-yellow-30 checked:border-[2.5px] checked:border-yellow-80"
                                    />
                                    <span
                                      class="font-normal select-none whitespace-nowrap text-neutral-100 font-base"
                                      >.pptx</span
                                    >
                                    <div class="ml-auto">
                                      <img
                                        src="../dist/icons/pptx.png"
                                        class="w-[24px] h-[24px]"
                                        alt="pptx"
                                      />
                                    </div>
                                  </label>
                                </div>
                                <div
                                  class="w-full px-3 py-3 border rounded-lg border-cloudy-40"
                                >
                                  <label
                                    class="flex items-center gap-3 cursor-pointer"
                                  >
                                    <input
                                      name="document"
                                      value="xls"
                                      type="radio"
                                      class="w-5 h-5 border border-gray-300 rounded-full checked:bg-yellow-30 checked:border-[2.5px] checked:border-yellow-80"
                                    />
                                    <span
                                      class="font-normal select-none whitespace-nowrap text-neutral-100 font-base"
                                      >.xls</span
                                    >
                                    <div class="ml-auto">
                                      <img
                                        src="../dist/icons/xls.png"
                                        class="w-[24px] h-[24px]"
                                        alt="xls"
                                      />
                                    </div>
                                  </label>
                                </div>
                              </div>
                              <button
                                class="w-full px-6 py-3 btn btn-sm btn-yellow"
                                id="download-chart"
                              >
                                Download
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Chart  -->
                      <figure class="highcharts-figure">
                        <div id="container"></div>
                        <p class="highcharts-description">Chart description</p>
                      </figure>
                    </div>
                    <div class="mt-auto">
                      <div
                        class="flex items-center text-base font-semibold capitalize text-secondary-90 border-t border-t-[#DEDDDE] border-b border-b-[#DEDDDE] bg-cloudy-0 px-6 py-4"
                      >
                        <div class="flex-1">1</div>
                        <div class="ml-auto">2</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="absolute hidden md:block w-[1px] top-0 left-[49.9%] h-full bg-cloudy-40"
                ></div>
                <!-- Table  -->
                <div class="w-full md:w-1/2">
                  <div class="relative overflow-x-auto md:max-h-[620px] h-full">
                    <table
                      class="w-full text-sm font-normal text-left bg-white text-secondary-90"
                    >
                      <thead
                        class="text-base font-semibold capitalize text-secondary-90"
                      >
                        <tr>
                          <th
                            scope="col"
                            class="px-6 py-4 pt-6 ml-6 whitespace-nowrap"
                          >
                            Machine Model
                          </th>
                          <th
                            scope="col"
                            class="px-3 py-4 pt-6 whitespace-nowrap"
                          >
                            YTD
                          </th>
                          <th
                            scope="col"
                            class="px-3 py-4 pt-6 whitespace-nowrap"
                          >
                            MTD
                          </th>
                          <th
                            scope="col"
                            class="px-3 py-4 pt-6 whitespace-nowrap"
                          >
                            GP Plan
                          </th>
                          <th
                            scope="col"
                            class="px-3 py-4 pt-6 whitespace-nowrap"
                          >
                            GP Trans.
                          </th>
                          <th
                            scope="col"
                            class="px-3 py-4 pt-6 whitespace-nowrap"
                          >
                            GP Actual
                          </th>
                          <th
                            scope="col"
                            class="px-8 py-4 pt-6 whitespace-nowrap"
                          >
                            &nbsp;
                          </th>
                        </tr>
                      </thead>
                      <tbody id="machine-body"></tbody>
                      <tfoot id="machine-footer"></tfoot>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Machine GP Data List  -->
        <div class="flex flex-col w-full pt-10">
          <div class="flex items-center">
            <h1
              class="text-cloudy-110 text-[32px] leading-10 font-semibold mb-6"
            >
              Machine GP Data List
            </h1>
            <div class="flex items-center ml-auto gap-x-6">
              <div>
                <button class="flex items-center btn btn-ghost" id="searchBtn">
                  <img
                    src="../dist/icons/search.svg"
                    class="w-6 h-6"
                    alt="search-icon"
                  />
                </button>
                <form class="hidden max-w-md mx-auto" id="formSearch">
                  <label
                    for="search"
                    class="mb-2 text-sm font-medium text-gray-900 sr-only"
                    >Search</label
                  >
                  <div class="relative">
                    <input
                      type="text"
                      id="search"
                      class="block w-full p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="Search..."
                      required
                    />
                    <button
                      type="button"
                      class="absolute text-white end-2 bottom-2"
                    >
                      <img
                        src="../dist/icons/search.svg"
                        class="w-6 h-6"
                        alt="search-icon"
                      />
                    </button>
                  </div>
                </form>
              </div>
              <div>
                <img src="../dist/icons/xls.png" class="w-6 h-6" alt="xls" />
              </div>
              <div>
                <button
                  class="px-6 py-3 btn btn-sm btn-yellow"
                  data-drawer-target="drawer-right-example"
                  data-drawer-show="drawer-right-example"
                  data-drawer-placement="right"
                >
                  <img src="../dist/icons/history-yellow.svg" class="" alt="history-yellow">
                  Log History
                </button>
              </div>
              <div>
                <button class="px-6 py-3 btn btn-sm btn-yellow">
                  Edit Data
                </button>
              </div>
            </div>
          </div>
          <div>
            <!-- Card  -->
            <div
              class="w-full border rounded-lg shadow-sm bg-card text-card-foreground"
            >
              <!-- Machine Table  -->
              <div class="p-6">
                <table id="machineTable" class="display">
                  <thead>
                    <tr>
                      <th>Company Code</th>
                      <th>Customer No</th>
                      <th>Customer Name</th>
                      <th>Profit Center</th>
                      <th>Profit Center Name</th>
                      <th>Profit Center Class</th>
                      <th>Payer No</th>
                      <th>Payer NAMEBusiness Area</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Drawer -->
    <div
      id="drawer-right-example"
      class="fixed top-0 right-0 z-[99] h-screen overflow-y-auto transition-transform translate-x-full bg-white w-9/12"
      tabindex="-1"
      aria-labelledby="drawer-right-label"
    >
      <div class="flex items-center px-10 py-8 bg-cloudy-20">
        <h3>Log History</h3>
        <button
          type="button"
          data-drawer-hide="drawer-right-example"
          aria-controls="drawer-right-example"
          class="flex items-center justify-center w-8 h-8 ml-auto text-sm text-gray-400 bg-transparent rounded-lg hover:bg-gray-200 hover:text-gray-900"
        >
          CLOSE
          <span class="sr-only">Close menu</span>
        </button>
      </div>

      <div class="px-4 py-3 md:px-8 md:py-6">
        <div class="relative overflow-x-auto rounded-lg">
          <table class="w-full text-sm text-left text-secondary-90">
            <thead
              class="text-sm font-medium capitalize text-secondary-90 bg-cloudy-30"
            >
              <tr>
                <th scope="col" class="px-4 py-3 border">Modification Date</th>
                <th scope="col" class="px-4 py-3 border">Changed By</th>
                <th scope="col" class="px-4 py-3 border">Changes</th>
              </tr>
            </thead>
            <tbody>
              <tr class="bg-white border-b">
                <td class="p-5 text-sm font-normal border text-secondary-90">
                  24/1/2024, 1:59 PM
                </td>
                <td class="p-5 border">
                  <h5 class="text-black-0">Aditi</h5>
                  <p class="text-xs font-normal text-cloudy-70">Statutory</p>
                </td>
                <td class="p-5 text-sm font-normal border text-black-0">
                  Change ID 150
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Backdrop  -->
    <div id="backdrop"></div>

    <!-- Jquery  -->
    <script src="../dist/js/jquery.min.js"></script>
    <!-- Popper  -->
    <script src="../plugins/popper.min.js"></script>
    <!-- Highcharts  -->
    <script src="../plugins/highcharts/js/highcharts.js"></script>
    <script src="../plugins/highcharts/js/exporting.js"></script>
    <script src="../plugins/highcharts/js/export-data.js"></script>
    <script src="../plugins/highcharts/js/accessibility.js"></script>
    <!-- Datatables  -->
    <script src="../plugins/datatable/js/dataTables.min.js"></script>
    <script>
      $(function () {
        function handleRowClick(event) {
          $(".machine-row").removeClass("bg-yellow-10");
          $(this).addClass("bg-yellow-10");

          const rowData = $(this)
            .children("td")
            .map(function () {
              return $(this).text();
            })
            .get();

          $("#selected-data").text(rowData.join(" | "));
        }

        $.getJSON("../dist/data/machine-data.json", function (data) {
          const machineBody = $("#machine-body");
          const machineFooter = $("#machine-footer");

          let totYtd = 0,
            totMtd = 0,
            totGpPlan = 0,
            totGpTrans = 0,
            totGpActual = 0;

          data.forEach((v) => {
            const row = $("<tr>").addClass(
              "border-t border-t-[#DEDDDE] bg-white cursor-pointer hover:bg-yellow-10 machine-row"
            );

            const createCell = (text) =>
              $("<td>")
                .addClass(
                  "px-3 py-4 font-normal whitespace-nowrap text-secondary-90 font-sm"
                )
                .text(text);

            const colMachine = createCell(v.machine_model).addClass(
              "pr-4 pl-6"
            );
            const colYtd = createCell(v.ytd);
            const colMtd = createCell(v.mtd);
            const colGpPlan = createCell(v.gp_plan);
            const colGpTrans = createCell(v.gp_trans);
            const colGpActual = createCell(v.gp_actual);

            totYtd += parseFloat(v.ytd);
            totMtd += parseFloat(v.mtd);
            totGpPlan += parseFloat(v.gp_plan);
            totGpTrans += parseFloat(v.gp_trans);
            totGpActual += parseFloat(v.gp_actual);

            const colAction = $("<td>").addClass(
              "px-3 py-4 whitespace-nowrap text-secondary-90 font-sm"
            );
            const image = $("<img>")
              .attr("src", "../dist/icons/arrowBackneclos.svg")
              .addClass("h-4 w-4 rounded-full");
            colAction.append(image);

            row.append(
              colMachine,
              colYtd,
              colMtd,
              colGpPlan,
              colGpTrans,
              colGpActual,
              colAction
            );
            row.click(handleRowClick);
            machineBody.append(row);
          });

          const rowFot = $("<tr>").addClass(
            "text-base font-semibold capitalize text-secondary-90 border-t border-t-[#DEDDDE] border-b border-b-[#DEDDDE] bg-cloudy-0"
          );

          const createCellFot = (text) =>
            $("<th>")
              .addClass(
                "px-4 py-4 font-semibold whitespace-nowrap text-secondary-90 font-sm"
              )
              .text(text);

          const colTotal = createCellFot("Total").addClass("pr-4 pl-6");
          const colFYtd = createCellFot(totYtd.toFixed(1) + " M");
          const colFMtd = createCellFot(totMtd.toFixed(1) + " M");
          const colFGpPlan = createCellFot(totGpPlan.toFixed(1) + " %");
          const colFGpTrans = createCellFot(totGpTrans.toFixed(1) + " %");
          const colFGpActual = createCellFot(totGpActual.toFixed(1) + " %");
          const colFAction = createCellFot("");

          rowFot.append(
            colTotal,
            colFYtd,
            colFMtd,
            colFGpPlan,
            colFGpTrans,
            colFGpActual,
            colFAction
          );

          machineFooter.append(rowFot);
        }).fail(function () {
          alert("Failed to load JSON machine data");
        });

        // ===== Start Machine Datatables =====
        var MachineTable = $("#machineTable").DataTable({
          columns: [
            { data: "company_code" },
            { data: "customer_no" },
            { data: "customer_name" },
            { data: "profit_center" },
            { data: "profit_center_name" },
            { data: "profit_center_class" },
            { data: "player_no" },
            { data: "player_business_area" },
          ],
        });

        $.getJSON("../dist/data/machine-data-list.json", function (data) {
          MachineTable.clear().rows.add(data).draw();
        }).fail(function () {
          console.error("Error loading JSON data.");
        });
        // ===== End Machine Datatables =====

        // ===== Start Drawer =====
        $("[data-drawer-show]").click(function () {
          var drawerId = $(this).attr("data-drawer-show");
          $("#" + drawerId).addClass("transform-none");
          $("#" + drawerId).removeClass("translate-x-full");
          $(
            '<div drawer-backdrop="" class="fixed inset-0 z-[70] bg-gray-900/50"></div>'
          )
            .attr("id", drawerId + "-backdrop")
            .appendTo("body");
        });

        $("[data-drawer-hide]").click(function () {
          var drawerId = $(this).attr("data-drawer-hide");
          $("#" + drawerId).addClass("translate-x-full");
          $("#" + drawerId).removeClass("transform-none");
          $("#" + drawerId + "-backdrop").remove();
        });

        $(document).on("click", "[drawer-backdrop]", function () {
          var backdropId = $(this).attr("id");
          const drawerId = backdropId.replace("-backdrop", "");
          $("#" + drawerId).addClass("translate-x-full");
          $("#" + drawerId).removeClass("transform-none");
          $(this).remove();
        });
        // ===== End Drawer =====

        // ===== Start Popover =====
        const $triggers = $(".trigger");
        let popperInstance = null;
        let $currentPopover = null;

        $triggers.on("click", function (e) {
          e.stopPropagation();
          const $trigger = $(this);
          const popoverSelector = $trigger.data("popover");
          const $popover = $(popoverSelector);

          if ($currentPopover && $currentPopover[0] !== $popover[0]) {
            $currentPopover.hide();
          }

          $popover.toggle();
          if ($popover.is(":visible")) {
            if (popperInstance) {
              popperInstance.destroy();
            }
            popperInstance = Popper.createPopper($trigger[0], $popover[0], {
              placement: "bottom-end",
            });
            $currentPopover = $popover;
          } else {
            $popover.hide();
            $currentPopover = null;
          }
        });

        $(document).on("click", function () {
          if ($currentPopover) {
            $currentPopover.hide();
            if (popperInstance) {
              popperInstance.destroy();
            }
            $currentPopover = null;
          }
        });

        $(".popover").on("click", function (e) {
          e.stopPropagation();
        });
        // ===== End Popover =====

        // ===== Start search =====
        // var $searchBtn = $("#searchBtn");
        // var $formSearch = $("#formSearch");

        // $searchBtn.on("click", function () {
        //   $(this).toggleClass("flex hidden");
        //   $formSearch.toggleClass("hidden flex");
        // });

        // $(document).on("click", function (event) {
        //   console.log("event target",event.target)
        //   console.log($(event.target).is("#searchBtn"));
        //   if (
        //     !$(event.target).closest("#formSearch").length &&
        //     !$(event.target).is("#searchBtn")
        //   ) {
        //     console.log("Form Search",$formSearch)
        //   }
        // });

        $("#searchBtn").on("click", function () {
          $("#formSearch").toggleClass("hidden");
          $("#searchBtn").toggleClass("hidden flex");
          if (!$("#formSearch").hasClass("hidden")) {
            $("#search").focus();
          }
        });

        $("#search").on("blur", function () {
          $("#formSearch").addClass("hidden");
          $("#searchBtn").addClass("flex").removeClass("hidden");
        });
        // ===== End search =====

        $("#download-chart").click(function () {
          alert("Download");
          $currentPopover.hide();
        });

        // ===== Start HighCharts =====
        Highcharts.chart("container", {
          chart: {
            type: "column",
          },

          title: {
            text: "Olympic Games all-time medal table, grouped by continent",
            align: "left",
          },

          xAxis: {
            categories: ["Gold", "Silver", "Bronze"],
          },

          yAxis: {
            allowDecimals: false,
            min: 0,
            title: {
              text: "Count medals",
            },
          },

          tooltip: {
            format:
              "<b>{key}</b><br/>{series.name}: {y}<br/>" +
              "Total: {point.stackTotal}",
          },

          plotOptions: {
            column: {
              stacking: "normal",
            },
          },

          series: [
            {
              name: "Norway",
              data: [148, 133, 124],
              stack: "Europe",
            },
            {
              name: "Germany",
              data: [102, 98, 65],
              stack: "Europe",
            },
            {
              name: "United States",
              data: [113, 122, 95],
              stack: "North America",
            },
            {
              name: "Canada",
              data: [77, 72, 80],
              stack: "North America",
            },
          ],
        });
      });
    </script>
  </body>
</html>
